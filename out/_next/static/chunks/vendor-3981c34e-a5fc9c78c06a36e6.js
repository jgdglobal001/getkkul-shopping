"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6804],{6096:(e,t,n)=>{n.d(t,{default:()=>r});var a=n(2626),o=n(5155);function r(e){let{locale:t,...n}=e;if(!t)throw Error(void 0);return(0,o.jsx)(a.Dk,{locale:t,...n})}},7652:(e,t,n)=>{n.d(t,{c3:()=>r});var a=n(2626);function o(e,t){return(...e)=>{try{return t(...e)}catch{throw Error(void 0)}}}let r=o(0,a.c3);o(0,a.kc)},8919:(e,t,n)=>{n.d(t,{CP:()=>x,Z3:()=>T,Jv:()=>C,CI:()=>P,wV:()=>R});var a,o,r,s,i,l=n(5155),c=n(2115),u=n.t(c,2),d=n(9829);class v extends d.lR{}class h extends d.lR{}async function w(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="".concat(f(t),"/").concat(e);try{var r;let e={headers:{"Content-Type":"application/json",...(null==a||null==(r=a.headers)?void 0:r.cookie)?{cookie:a.headers.cookie}:{}}};(null==a?void 0:a.body)&&(e.body=JSON.stringify(a.body),e.method="POST");let t=await fetch(o,e),n=await t.json();if(!t.ok)throw n;return n}catch(e){return n.error(new v(e.message,e)),null}}function f(e){return e.basePath}function g(){return Math.floor(Date.now()/1e3)}function p(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let n=new URL(e||t),a=("/"===n.pathname?t.pathname:n.pathname).replace(/\/$/,""),o="".concat(n.origin).concat(a);return{origin:n.origin,host:n.host,path:a,base:o,toString:()=>o}}var _=n(9509);let y={baseUrl:p(null!=(o=_.env.NEXTAUTH_URL)?o:_.env.VERCEL_URL).origin,basePath:p(_.env.NEXTAUTH_URL).path,baseUrlServer:p(null!=(s=null!=(r=_.env.NEXTAUTH_URL_INTERNAL)?r:_.env.NEXTAUTH_URL)?s:_.env.VERCEL_URL).origin,basePathServer:p(null!=(i=_.env.NEXTAUTH_URL_INTERNAL)?i:_.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},E=null;function b(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{},name:"next-auth",onmessage:null,onmessageerror:null,close:()=>{},dispatchEvent:()=>!1}:new BroadcastChannel("next-auth")}function m(){return null===E&&(E=b()),E}let S={debug:console.debug,error:console.error,warn:console.warn},L=null==(a=c.createContext)?void 0:a.call(u,void 0);function R(e){if(!L)throw Error("React Context is unavailable in Server Components");let t=c.useContext(L),{required:n,onUnauthenticated:a}=null!=e?e:{},o=n&&"unauthenticated"===t.status;return(c.useEffect(()=>{if(o){let e="".concat(y.basePath,"/signin?").concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));a?a():window.location.href=e}},[o,a]),o)?{data:t.data,update:t.update,status:"loading"}:t}async function U(e){var t;let n=await w("session",y,S,e);return(null==(t=null==e?void 0:e.broadcast)||t)&&b().postMessage({event:"session",data:{trigger:"getSession"}}),n}async function k(){var e;let t=await w("csrf",y,S);return null!=(e=null==t?void 0:t.csrfToken)?e:""}async function T(){return w("providers",y,S)}async function C(e,t,n){var a,o,r;let{callbackUrl:s,...i}=null!=t?t:{},{redirect:l=!0,redirectTo:c=null!=s?s:window.location.href,...u}=i,d=f(y),v=await T();if(!v){window.location.href="".concat(d,"/error");return}if(!e||!v[e]){let e="".concat(d,"/signin?").concat(new URLSearchParams({callbackUrl:c}));window.location.href=e;return}let h=v[e].type;if("webauthn"===h)throw TypeError(['Provider id "'.concat(e,'" refers to a WebAuthn provider.'),'Please use `import { signIn } from "next-auth/webauthn"` instead.'].join("\n"));let w="".concat(d,"/").concat("credentials"===h?"callback":"signin","/").concat(e),g=await k(),p=await fetch("".concat(w,"?").concat(new URLSearchParams(n)),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...u,csrfToken:g,callbackUrl:c})}),_=await p.json();if(l){let e=null!=(a=_.url)?a:c;window.location.href=e,e.includes("#")&&window.location.reload();return}let E=null!=(o=new URL(_.url).searchParams.get("error"))?o:void 0,b=null!=(r=new URL(_.url).searchParams.get("code"))?r:void 0;return p.ok&&await y._getSession({event:"storage"}),{error:E,code:b,status:p.status,ok:p.ok,url:E?null:_.url}}async function P(e){var t,n;let{redirect:a=!0,redirectTo:o=null!=(t=null==e?void 0:e.callbackUrl)?t:window.location.href}=null!=e?e:{},r=f(y),s=await k(),i=await fetch("".concat(r,"/signout"),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:s,callbackUrl:o})}),l=await i.json();if(m().postMessage({event:"session",data:{trigger:"signout"}}),a){let e=null!=(n=l.url)?n:o;window.location.href=e,e.includes("#")&&window.location.reload();return}return await y._getSession({event:"storage"}),l}function x(e){if(!L)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:n,refetchInterval:a,refetchWhenOffline:o}=e;n&&(y.basePath=n);let r=void 0!==e.session;y._lastSync=r?g():0;let[s,i]=c.useState(()=>(r&&(y._session=e.session),e.session)),[u,d]=c.useState(!r);c.useEffect(()=>(y._getSession=async function(){let{event:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t="storage"===e;if(t||void 0===y._session){y._lastSync=g(),y._session=await U({broadcast:!t}),i(y._session);return}if(!e||null===y._session||g()<y._lastSync)return;y._lastSync=g(),y._session=await U(),i(y._session)}catch(e){S.error(new h(e.message,e))}finally{d(!1)}},y._getSession(),()=>{y._lastSync=0,y._session=void 0,y._getSession=()=>{}}),[]),c.useEffect(()=>{let e=()=>y._getSession({event:"storage"});return m().addEventListener("message",e),()=>m().removeEventListener("message",e)},[]),c.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,n=()=>{t&&"visible"===document.visibilityState&&y._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",n,!1),()=>document.removeEventListener("visibilitychange",n,!1)},[e.refetchOnWindowFocus]);let v=function(){let[e,t]=c.useState("undefined"!=typeof navigator&&navigator.onLine),n=()=>t(!0),a=()=>t(!1);return c.useEffect(()=>(window.addEventListener("online",n),window.addEventListener("offline",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}),[]),e}(),f=!1!==o||v;c.useEffect(()=>{if(a&&f){let e=setInterval(()=>{y._session&&y._getSession({event:"poll"})},1e3*a);return()=>clearInterval(e)}},[a,f]);let p=c.useMemo(()=>({data:s,status:u?"loading":s?"authenticated":"unauthenticated",async update(e){if(u)return;d(!0);let t=await w("session",y,S,void 0===e?void 0:{body:{csrfToken:await k(),data:e}});return d(!1),t&&(i(t),m().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[s,u]);return(0,l.jsx)(L.Provider,{value:p,children:t})}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7250],{2014:(e,s,l)=>{"use strict";l.d(s,{CurrencyProvider:()=>c,H:()=>d});var r=l(5155),t=l(2115);let a=(0,t.createContext)(void 0),n={USD:{symbol:"$",name:"US Dollar"},EUR:{symbol:"€",name:"Euro"},GBP:{symbol:"\xa3",name:"British Pound"},JPY:{symbol:"\xa5",name:"Japanese Yen"},CAD:{symbol:"C$",name:"Canadian Dollar"},AUD:{symbol:"A$",name:"Australian Dollar"},CHF:{symbol:"CHF",name:"Swiss Franc"},CNY:{symbol:"\xa5",name:"Chinese Yuan"},KRW:{symbol:"₩",name:"Korean Won"},INR:{symbol:"₹",name:"Indian Rupee"},BDT:{symbol:"৳",name:"Bangladeshi Taka"},PKR:{symbol:"₨",name:"Pakistani Rupee"}},i={USD:1,EUR:.85,GBP:.73,JPY:110,CAD:1.25,AUD:1.35,CHF:.92,CNY:6.45,KRW:1300,INR:83.25,BDT:109.5,PKR:278.5},c=e=>{let{children:s}=e,[l,c]=(0,t.useState)("KRW"),[d,o]=(0,t.useState)(i);return(0,t.useEffect)(()=>{{let e=localStorage.getItem("selectedCurrency");e&&n[e]&&c(e)}},[]),(0,t.useEffect)(()=>{let e=async()=>{let e={...i};Object.keys(e).forEach(s=>{if("USD"!==s){let l=(Math.random()-.5)*.02;e[s]*=1+l}}),o(e)};e();let s=setInterval(e,3e5);return()=>clearInterval(s)},[]),(0,r.jsx)(a.Provider,{value:{selectedCurrency:l,setCurrency:e=>{c(e),localStorage.setItem("selectedCurrency",e)},exchangeRates:d,convertPrice:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return s===l?e:e/d[s]*d[l]},getCurrencySymbol:e=>{var s;return(null==(s=n[e])?void 0:s.symbol)||"$"},getCurrencyName:e=>{var s;return(null==(s=n[e])?void 0:s.name)||"US Dollar"}},children:s})},d=()=>{let e=(0,t.useContext)(a);if(void 0===e)throw Error("useCurrency must be used within a CurrencyProvider");return e}},2785:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});var r=l(5155),t=l(9688);let a=e=>{let{children:s,className:l}=e;return(0,r.jsx)("div",{className:(0,t.QP)("max-w-[1140px] mx-auto px-4 lg:px-0",l),children:s})}},3013:(e,s,l)=>{Promise.resolve().then(l.bind(l,7508))},4846:(e,s,l)=>{"use strict";l.d(s,{default:()=>n});var r=l(5155),t=l(9688),a=l(2014);let n=e=>{let{amount:s,className:l,fromCurrency:n="USD"}=e,{selectedCurrency:i,convertPrice:c}=(0,a.H)();if(!s)return(0,r.jsx)("span",{className:(0,t.QP)("font-medium",l),children:"-"});let d=c(s,n),o=!["JPY","BDT"].includes(i),m=new Intl.NumberFormat("en-US",{style:"currency",currency:i,minimumFractionDigits:2*!!o,maximumFractionDigits:2*!!o}).format(d);return(0,r.jsx)("span",{className:(0,t.QP)("font-medium",l),children:m})}},7508:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>u});var r=l(5155),t=l(2115),a=l(8919),n=l(5695),i=l(2785),c=l(4846),d=l(9053),o=l(351),m=l(6874),x=l.n(m),h=l(4438);let u=()=>{var e,s,l,m,u,g,y,j;let{data:p}=(0,a.wV)(),N=(0,n.useRouter)(),b=(0,n.useSearchParams)(),[v,f]=(0,t.useState)(!0),[w,C]=(0,t.useState)(null),[S,P]=(0,t.useState)(null),[A,D]=(0,t.useState)(!1),k=b.get("orderId"),U=b.get("cancelled");(0,t.useEffect)(()=>{k?R():N.push("/cart")},[k,N]),(0,t.useEffect)(()=>{if(U){let e=setTimeout(()=>{new URLSearchParams(b.toString()).delete("cancelled");let e="/checkout?orderId=".concat(k);N.replace(e)},5e3);return()=>clearTimeout(e)}},[U,k,b,N]);let R=async()=>{try{var e;f(!0);let s=await fetch("/api/user/profile?email=".concat(encodeURIComponent((null==p||null==(e=p.user)?void 0:e.email)||""))),l=await s.json();if(l.orders){let e=l.orders.find(e=>e.id===k);e?C(e):N.push("/account/orders")}else N.push("/account/orders")}catch(e){console.error("Error fetching order:",e),N.push("/account/orders")}finally{f(!1)}},I=async()=>{h.Ay.success("Cash on delivery is on the way")},E=async()=>{h.Ay.success("Stripe Payment on delivery is on the way")};return v?(0,r.jsx)(i.A,{className:"py-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-96",children:[(0,r.jsx)(o.TwU,{className:"animate-spin text-4xl text-theme-color"}),(0,r.jsx)("span",{className:"ml-4 text-lg",children:"Loading order details..."})]})}):(null==p?void 0:p.user)?w?(0,r.jsx)(d.default,{loadingMessage:"Loading checkout...",children:(0,r.jsxs)(i.A,{className:"py-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(x(),{href:"/account/orders",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)(o.kRp,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Order #",(null==w?void 0:w.orderId)||k]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Choose your payment method"})]})]})}),U&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Payment Cancelled"}),(0,r.jsx)("div",{className:"mt-1 text-sm text-yellow-700",children:(0,r.jsx)("p",{children:"Your payment was cancelled. You can try the payment again when you're ready."})})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(o.est,{className:"w-5 h-5 mr-2"}),"Order Items (",(null==w||null==(e=w.items)?void 0:e.length)||0,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:null==w||null==(s=w.items)?void 0:s.map((e,s)=>{var l,t;return(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.images&&e.images[0]?(0,r.jsx)("img",{src:e.images[0],alt:e.name||e.title,className:"w-20 h-20 rounded-lg object-cover"}):(0,r.jsx)("div",{className:"w-20 h-20 bg-gray-300 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-lg font-medium text-gray-600",children:(null==(t=e.name||e.title)||null==(l=t.charAt(0))?void 0:l.toUpperCase())||"P"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.name||e.title}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["Qty: ",e.quantity]}),(0,r.jsx)("span",{children:(0,r.jsx)(c.default,{amount:e.price})})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:(0,r.jsx)(c.default,{amount:e.total})})})]},"order-".concat(e.id,"-").concat(s))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(o.HzC,{className:"w-5 h-5 mr-2"}),"Shipping Address"]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:null==w||null==(l=w.shippingAddress)?void 0:l.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:null==w||null==(m=w.shippingAddress)?void 0:m.address}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[null==w||null==(u=w.shippingAddress)?void 0:u.city,","," ",null==w||null==(g=w.shippingAddress)?void 0:g.state," ",null==w||null==(y=w.shippingAddress)?void 0:y.zipCode]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:null==w||null==(j=w.shippingAddress)?void 0:j.country})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(o.lZI,{className:"w-5 h-5 mr-2"}),"Order Summary"]}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Total Amount"}),(0,r.jsx)(c.default,{amount:parseFloat((null==w?void 0:w.amount)||"0"),className:"font-semibold text-theme-color"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choose Payment Method"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-colors ".concat("cod"===S?"border-theme-color bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>P("cod"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.BLY,{className:"w-5 h-5 mr-3 text-gray-600"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Cash on Delivery"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Pay when your order is delivered"})]}),(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border-2 ".concat("cod"===S?"border-theme-color bg-theme-color":"border-gray-300"),children:"cod"===S&&(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})}),(0,r.jsx)("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-colors ".concat("stripe"===S?"border-theme-color bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>P("stripe"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.lZI,{className:"w-5 h-5 mr-3 text-gray-600"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Pay with Card"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Secure payment via Stripe"})]}),(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border-2 ".concat("stripe"===S?"border-theme-color bg-theme-color":"border-gray-300"),children:"stripe"===S&&(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})})]}),(0,r.jsx)("div",{className:"mt-6",children:"cod"===S?(0,r.jsx)("button",{onClick:I,disabled:A,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.TwU,{className:"animate-spin mr-2"}),"Processing..."]}):"Confirm Cash on Delivery"}):"stripe"===S?(0,r.jsx)("button",{onClick:E,disabled:A,className:"w-full bg-theme-color text-white py-3 px-4 rounded-lg hover:bg-theme-color/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.TwU,{className:"animate-spin mr-2"}),"Processing..."]}):"Pay with Card"}):(0,r.jsx)("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-500 py-3 px-4 rounded-lg cursor-not-allowed",children:"Select Payment Method"})})]})]})]})]})}):(0,r.jsx)(i.A,{className:"py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Order not found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"The order you're looking for could not be found."}),(0,r.jsx)(x(),{href:"/account/orders",className:"bg-theme-color text-white px-6 py-3 rounded-lg hover:bg-theme-color/90 transition-colors",children:"View Orders"})]})}):(0,r.jsx)(i.A,{className:"py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please Sign In"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to complete your order."}),(0,r.jsx)(x(),{href:"/auth/signin",className:"bg-theme-color text-white px-6 py-3 rounded-lg hover:bg-theme-color/90 transition-colors",children:"Sign In"})]})})}},9053:(e,s,l)=>{"use strict";l.d(s,{default:()=>m});var r=l(5155),t=l(8919),a=l(5695),n=l(2115),i=l(2785),c=l(351),d=l(6874),o=l.n(d);let m=e=>{let{children:s,fallbackPath:l="/auth/signin",loadingMessage:d="Checking authentication..."}=e,{data:m,status:x}=(0,t.wV)(),h=(0,a.useRouter)(),[u,g]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if("loading"!==x)if("unauthenticated"!==x&&(null==m?void 0:m.user))g(!1);else{g(!0);let e=setTimeout(()=>{h.push(l)},1500);return()=>clearTimeout(e)}},[m,x,h,l]),"loading"===x)?(0,r.jsx)(i.A,{className:"py-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-96",children:[(0,r.jsx)(c.TwU,{className:"animate-spin text-4xl text-theme-color mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:d})]})}):"unauthenticated"!==x&&((null==m?void 0:m.user)||"authenticated"!==x)&&!u?(0,r.jsx)(r.Fragment,{children:s}):(0,r.jsx)(i.A,{className:"py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to access this page."}),(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded mb-4 text-sm text-left",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",x]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Has Session:"})," ",m?"Yes":"No"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Has User:"})," ",(null==m?void 0:m.user)?"Yes":"No"]}),(null==m?void 0:m.user)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"User Email:"})," ",m.user.email]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,r.jsx)(c.TwU,{className:"animate-spin text-xl text-theme-color"}),(0,r.jsx)("span",{className:"text-gray-500",children:"Checking authentication..."})]}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)(o(),{href:"/auth/signin",className:"inline-block bg-theme-color text-white px-6 py-2 rounded hover:bg-theme-color/80",children:"Sign In"}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"inline-block bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600",children:"Refresh Page"})]})]})})}}},e=>{e.O(0,[7128,6804,1495,4575,1261,7538,8681,4679,734,4610,8641,6546,4314,296,1436,2448,1294,4162,7358],()=>e(e.s=3013)),_N_E=e.O()}]);
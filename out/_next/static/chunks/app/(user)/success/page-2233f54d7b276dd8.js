(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9097],{2014:(e,s,r)=>{"use strict";r.d(s,{CurrencyProvider:()=>d,H:()=>o});var a=r(5155),t=r(2115);let l=(0,t.createContext)(void 0),n={USD:{symbol:"$",name:"US Dollar"},EUR:{symbol:"€",name:"Euro"},GBP:{symbol:"\xa3",name:"British Pound"},JPY:{symbol:"\xa5",name:"Japanese Yen"},CAD:{symbol:"C$",name:"Canadian Dollar"},AUD:{symbol:"A$",name:"Australian Dollar"},CHF:{symbol:"CHF",name:"Swiss Franc"},CNY:{symbol:"\xa5",name:"Chinese Yuan"},KRW:{symbol:"₩",name:"Korean Won"},INR:{symbol:"₹",name:"Indian Rupee"},BDT:{symbol:"৳",name:"Bangladeshi Taka"},PKR:{symbol:"₨",name:"Pakistani Rupee"}},i={USD:1,EUR:.85,GBP:.73,JPY:110,CAD:1.25,AUD:1.35,CHF:.92,CNY:6.45,KRW:1300,INR:83.25,BDT:109.5,PKR:278.5},d=e=>{let{children:s}=e,[r,d]=(0,t.useState)("KRW"),[o,c]=(0,t.useState)(i);return(0,t.useEffect)(()=>{{let e=localStorage.getItem("selectedCurrency");e&&n[e]&&d(e)}},[]),(0,t.useEffect)(()=>{let e=async()=>{let e={...i};Object.keys(e).forEach(s=>{if("USD"!==s){let r=(Math.random()-.5)*.02;e[s]*=1+r}}),c(e)};e();let s=setInterval(e,3e5);return()=>clearInterval(s)},[]),(0,a.jsx)(l.Provider,{value:{selectedCurrency:r,setCurrency:e=>{d(e),localStorage.setItem("selectedCurrency",e)},exchangeRates:o,convertPrice:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return s===r?e:e/o[s]*o[r]},getCurrencySymbol:e=>{var s;return(null==(s=n[e])?void 0:s.symbol)||"$"},getCurrencyName:e=>{var s;return(null==(s=n[e])?void 0:s.name)||"US Dollar"}},children:s})},o=()=>{let e=(0,t.useContext)(l);if(void 0===e)throw Error("useCurrency must be used within a CurrencyProvider");return e}},2785:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var a=r(5155),t=r(9688);let l=e=>{let{children:s,className:r}=e;return(0,a.jsx)("div",{className:(0,t.QP)("max-w-[1140px] mx-auto px-4 lg:px-0",r),children:s})}},4846:(e,s,r)=>{"use strict";r.d(s,{default:()=>n});var a=r(5155),t=r(9688),l=r(2014);let n=e=>{let{amount:s,className:r,fromCurrency:n="USD"}=e,{selectedCurrency:i,convertPrice:d}=(0,l.H)();if(!s)return(0,a.jsx)("span",{className:(0,t.QP)("font-medium",r),children:"-"});let o=d(s,n),c=!["JPY","BDT"].includes(i),u=new Intl.NumberFormat("en-US",{style:"currency",currency:i,minimumFractionDigits:2*!!c,maximumFractionDigits:2*!!c}).format(o);return(0,a.jsx)("span",{className:(0,t.QP)("font-medium",r),children:u})}},8246:(e,s,r)=>{Promise.resolve().then(r.bind(r,9165))},9053:(e,s,r)=>{"use strict";r.d(s,{default:()=>u});var a=r(5155),t=r(8919),l=r(5695),n=r(2115),i=r(2785),d=r(351),o=r(6874),c=r.n(o);let u=e=>{let{children:s,fallbackPath:r="/auth/signin",loadingMessage:o="Checking authentication..."}=e,{data:u,status:m}=(0,t.wV)(),x=(0,l.useRouter)(),[h,y]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if("loading"!==m)if("unauthenticated"!==m&&(null==u?void 0:u.user))y(!1);else{y(!0);let e=setTimeout(()=>{x.push(r)},1500);return()=>clearTimeout(e)}},[u,m,x,r]),"loading"===m)?(0,a.jsx)(i.A,{className:"py-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-96",children:[(0,a.jsx)(d.TwU,{className:"animate-spin text-4xl text-theme-color mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:o})]})}):"unauthenticated"!==m&&((null==u?void 0:u.user)||"authenticated"!==m)&&!h?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(i.A,{className:"py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to access this page."}),(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded mb-4 text-sm text-left",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",m]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Has Session:"})," ",u?"Yes":"No"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Has User:"})," ",(null==u?void 0:u.user)?"Yes":"No"]}),(null==u?void 0:u.user)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"User Email:"})," ",u.user.email]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,a.jsx)(d.TwU,{className:"animate-spin text-xl text-theme-color"}),(0,a.jsx)("span",{className:"text-gray-500",children:"Checking authentication..."})]}),(0,a.jsxs)("div",{className:"space-x-4",children:[(0,a.jsx)(c(),{href:"/auth/signin",className:"inline-block bg-theme-color text-white px-6 py-2 rounded hover:bg-theme-color/80",children:"Sign In"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"inline-block bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600",children:"Refresh Page"})]})]})})}},9165:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var a=r(5155),t=r(2785);let l=()=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8 max-w-md w-full shadow-sm animate-pulse",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded h-5 w-32 mb-3"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded h-4 w-16"}),(0,a.jsx)("div",{className:"bg-gray-200 rounded h-4 w-20"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded h-4 w-12"}),(0,a.jsx)("div",{className:"bg-gray-200 rounded h-4 w-16"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded h-4 w-10"}),(0,a.jsx)("div",{className:"bg-gray-200 rounded-full h-6 w-20"})]})]})]});var n=r(4846),i=r(9053),d=r(9281),o=r(6874),c=r.n(o),u=r(5695),m=r(2115),x=r(4438),h=r(4540),y=r(8919);let f=()=>{var e;let s=(0,u.useSearchParams)(),r=s.get("session_id"),o=s.get("order_id"),f=(0,h.wA)(),{data:v}=(0,y.wV)(),[g,j]=(0,m.useState)(!1),[p,b]=(0,m.useState)(null);r||(0,u.redirect)("/"),(0,m.useEffect)(()=>{var e;r&&(null==v||null==(e=v.user)?void 0:e.email)&&!g&&N()},[r,null==v||null==(e=v.user)?void 0:e.email,g]);let N=async()=>{try{var e,s;if(o&&(await fetch("/api/orders/update-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:o,email:null==v||null==(s=v.user)?void 0:s.email,paymentStatus:"paid"})})).ok){x.Ay.success("Payment completed successfully!"),j(!0);return}let a=await fetch("/api/orders/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:r,email:null==v||null==(e=v.user)?void 0:e.email})}),t=await a.json();t.success?(b(t.order),j(!0),f((0,d.iR)()),x.Ay.success("Order processed successfully!")):x.Ay.error("Failed to process order")}catch(e){console.error("Error processing order:",e),x.Ay.error("Error processing order")}};return(0,a.jsx)(i.default,{loadingMessage:"Processing your order...",children:(0,a.jsx)(t.A,{className:"py-10",children:(0,a.jsxs)("div",{className:"min-h-[500px] flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"\uD83C\uDF89 Payment Successful!"}),(0,a.jsxs)("p",{className:"text-lg text-gray-600 mb-2",children:["Thank you for your purchase from"," ",(0,a.jsx)("span",{className:"font-semibold text-theme-color",children:"Getkkul"})]}),(0,a.jsx)("p",{className:"text-gray-500",children:"Your order has been confirmed and will be processed shortly."})]}),g?p?(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8 max-w-md w-full shadow-sm",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Summary"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Order ID:"}),(0,a.jsxs)("span",{className:"font-medium",children:["#",p.id]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Amount:"}),(0,a.jsx)("span",{className:"font-medium",children:(0,a.jsx)(n.default,{amount:p.amount})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Confirmed"})]})]})]}):null:(0,a.jsx)(l,{}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,a.jsx)(c(),{href:"/account/orders",children:(0,a.jsx)("button",{className:"bg-theme-color text-white px-8 py-3 rounded-md font-medium hover:bg-theme-color/90 transition-colors duration-200 w-52",children:"View My Orders"})}),(0,a.jsx)(c(),{href:"/",children:(0,a.jsx)("button",{className:"border border-gray-300 text-gray-700 px-8 py-3 rounded-md font-medium hover:bg-gray-50 transition-colors duration-200 w-52",children:"Continue Shopping"})})]}),(0,a.jsx)("div",{className:"mt-8 text-center max-w-md",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"You will receive an email confirmation shortly with your order details and tracking information."})})]})})})}},9281:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>h,CG:()=>o,Pj:()=>m,a1:()=>i,bE:()=>t,iR:()=>u,nu:()=>l,o7:()=>d,wT:()=>x});let a=(0,r(5710).Z0)({name:"getkkul",initialState:{cart:[],favorite:[],userInfo:null},reducers:{addToCart:(e,s)=>{var r;let a=null==e||null==(r=e.cart)?void 0:r.find(e=>{var r;return(null==e?void 0:e.id)===(null==(r=s.payload)?void 0:r.id)});a?a.quantity+=1:e.cart.push({...s.payload,quantity:1})},increaseQuantity:(e,s)=>{var r;let a=null==e||null==(r=e.cart)?void 0:r.find(e=>(null==e?void 0:e.id)===s.payload);a&&(a.quantity+=1)},decreaseQuantity:(e,s)=>{var r;let a=null==e||null==(r=e.cart)?void 0:r.find(e=>(null==e?void 0:e.id)===s.payload);a&&(a.quantity-=1)},removeFromCart:(e,s)=>{e.cart=e.cart.filter(e=>(null==e?void 0:e.id)!==s.payload)},resetCart:e=>{e.cart=[]},addToFavorite:(e,s)=>{var r;(null==e||null==(r=e.favorite)?void 0:r.find(e=>{var r;return(null==e?void 0:e.id)===(null==(r=s.payload)?void 0:r.id)}))?e.favorite=e.favorite.filter(e=>(null==e?void 0:e.id)!==s.payload.id):e.favorite.push(s.payload)},resetFavorite:e=>{e.favorite=[]},addUser:(e,s)=>{e.userInfo=s.payload},updateUser:(e,s)=>{e.userInfo&&(e.userInfo={...e.userInfo,...s.payload})},removeUser:e=>{e.userInfo=null}}}),{addToCart:t,addUser:l,updateUser:n,removeUser:i,increaseQuantity:d,decreaseQuantity:o,removeFromCart:c,resetCart:u,addToFavorite:m,resetFavorite:x}=a.actions,h=a.reducer}},e=>{e.O(0,[7128,6804,1495,4575,1261,7538,8681,4679,734,4610,8641,6546,4314,296,1436,2448,1294,4162,7358],()=>e(e.s=8246)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1706],{2720:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155),r=s(2115);function n(e){let{isOpen:t,onClose:s,title:n,children:o,width:l="w-96"}=e,[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{t?(d(!0),setTimeout(()=>u(!0),10)):(u(!1),setTimeout(()=>d(!1),350))},[t]),(0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s]),i)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"\n          fixed inset-0 z-40 transition-all duration-300 ease-out\n          ".concat(c?"bg-black/50":"bg-black/0","\n        "),onClick:s,style:{backdropFilter:c?"blur(2px)":"blur(0px)",WebkitBackdropFilter:c?"blur(2px)":"blur(0px)"}}),(0,a.jsxs)("div",{className:"\n          fixed inset-y-0 right-0 z-50\n          ".concat(l,"\n          bg-white shadow-2xl\n          flex flex-col\n          transform transition-all duration-350 ease-out\n          ").concat(c?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n        "),style:{transitionProperty:"transform, opacity, box-shadow",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"},children:[(0,a.jsxs)("div",{className:"\n            flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50 flex-shrink-0\n            transition-all duration-400 ease-out\n            ".concat(c?"translate-y-0 opacity-100":"-translate-y-4 opacity-0","\n          "),style:{transitionDelay:c?"100ms":"0ms"},children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:n}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-200 rounded-full transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"Close",children:(0,a.jsx)("svg",{className:"w-5 h-5 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"\n            flex-1 overflow-y-auto\n            transition-all duration-400 ease-out\n            ".concat(c?"translate-y-0 opacity-100":"translate-y-4 opacity-0","\n          "),style:{transitionDelay:c?"200ms":"0ms"},children:(0,a.jsx)("div",{className:"p-6",children:o})})]})]}):null}},2740:(e,t,s)=>{"use strict";s.d(t,{Xr:()=>a,i6:()=>n,jM:()=>r});let a=[{code:"BD",name:"Bangladesh",cities:["Dhaka","Chittagong","Sylhet","Khulna","Rajshahi","Rangpur","Barisal","Mymensingh","Cumilla","Narayanganj","Gazipur","Tongi","Jessore","Bogra","Dinajpur"]},{code:"US",name:"United States",cities:["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose","Austin","Jacksonville","Fort Worth","Columbus","Charlotte","San Francisco","Indianapolis","Seattle","Denver","Washington DC","Boston","El Paso","Nashville","Detroit","Oklahoma City","Portland","Las Vegas","Memphis","Louisville","Baltimore"]},{code:"IN",name:"India",cities:["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad"]},{code:"CA",name:"Canada",cities:["Toronto","Montreal","Vancouver","Calgary","Edmonton","Ottawa","Winnipeg","Quebec City","Hamilton","Kitchener","London","Victoria","Halifax","Oshawa","Windsor","Saskatoon","St. Catharines","Regina","Sherbrooke","Barrie"]},{code:"GB",name:"United Kingdom",cities:["London","Birmingham","Manchester","Leeds","Liverpool","Sheffield","Bristol","Glasgow","Leicester","Edinburgh","Coventry","Bradford","Cardiff","Belfast","Nottingham","Hull","Newcastle","Stoke-on-Trent","Southampton","Derby"]},{code:"AU",name:"Australia",cities:["Sydney","Melbourne","Brisbane","Perth","Adelaide","Gold Coast","Newcastle","Canberra","Sunshine Coast","Wollongong","Hobart","Geelong","Townsville","Cairns","Darwin","Toowoomba","Ballarat","Bendigo","Albury","Launceston"]},{code:"DE",name:"Germany",cities:["Berlin","Hamburg","Munich","Cologne","Frankfurt","Stuttgart","D\xfcsseldorf","Dortmund","Essen","Leipzig","Bremen","Dresden","Hanover","Nuremberg","Duisburg","Bochum","Wuppertal","Bielefeld","Bonn","M\xfcnster"]},{code:"FR",name:"France",cities:["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-\xc9tienne","Toulon","Angers","Grenoble","Dijon","N\xeemes","Aix-en-Provence"]}];function r(e){return a.find(t=>t.code===e)}function n(e){let t=r(e);return t?t.cities:[]}},5762:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),r=s(2115),n=s(2740);function o(e){let{address:t,onSubmit:s,onCancel:o,loading:l=!1,isEdit:i=!1,showSetDefault:d=!0}=e,[c,u]=(0,r.useState)({street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1,...t}),[m,h]=(0,r.useState)([]),[x,y]=(0,r.useState)({});(0,r.useEffect)(()=>{if(c.country){let e=(0,n.i6)(c.country);h(e),c.city&&!e.includes(c.city)&&u(e=>({...e,city:""}))}else h([])},[c.country]),(0,r.useEffect)(()=>{(null==t?void 0:t.country)&&h((0,n.i6)(t.country))},[t]);let p=e=>{let{name:t,value:s,type:a}=e.target,r="checkbox"===a&&e.target.checked;u(e=>({...e,[t]:"checkbox"===a?r:s})),x[t]&&y(e=>({...e,[t]:""}))};return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{let e={};return c.street.trim()||(e.street="Street address is required"),c.city.trim()||(e.city="City is required"),c.state.trim()||(e.state="State/Province is required"),c.zipCode.trim()||(e.zipCode="ZIP/Postal code is required"),c.country||(e.country="Country is required"),y(e),0===Object.keys(e).length})()&&s(c)},className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),(0,a.jsx)("input",{type:"text",name:"street",value:c.street,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-theme-color ".concat(x.street?"border-red-500":"border-gray-300"),placeholder:"Enter your street address"}),x.street&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.street})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),(0,a.jsxs)("select",{name:"country",value:c.country,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-theme-color ".concat(x.country?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("option",{value:"",children:"Select Country"}),n.Xr.map(e=>(0,a.jsx)("option",{value:e.code,children:e.name},e.code))]}),x.country&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.country})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),m.length>0?(0,a.jsxs)("select",{name:"city",value:c.city,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-theme-color ".concat(x.city?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("option",{value:"",children:"Select City"}),m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}):(0,a.jsx)("input",{type:"text",name:"city",value:c.city,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-theme-color ".concat(x.city?"border-red-500":"border-gray-300"),placeholder:c.country?"Select a country first":"Enter city name",disabled:!c.country}),x.city&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.city})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province *"}),(0,a.jsx)("input",{type:"text",name:"state",value:c.state,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-theme-color ".concat(x.state?"border-red-500":"border-gray-300"),placeholder:"Enter state or province"}),x.state&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.state})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code *"}),(0,a.jsx)("input",{type:"text",name:"zipCode",value:c.zipCode,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-theme-color ".concat(x.zipCode?"border-red-500":"border-gray-300"),placeholder:"Enter ZIP or postal code"}),x.zipCode&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.zipCode})]}),!i&&d&&(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"isDefault",checked:c.isDefault,onChange:p,className:"mr-2 h-4 w-4 text-theme-color focus:ring-theme-color border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Set as default address"})]})}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-theme-color text-white rounded-md hover:bg-theme-color/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),(0,a.jsx)("path",{fill:"currentColor",className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Updating...":"Adding..."]}):i?"Update Address":"Add Address"})]})]})}},8468:(e,t,s)=>{Promise.resolve().then(s.bind(s,9111))},9111:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(5155),r=s(8919),n=s(2115),o=s(2720),l=s(5762),i=s(2740);function d(e){let{addresses:t,onAddressesChange:s}=e,{data:d}=(0,r.wV)(),[c,u]=(0,n.useState)(t),[m,h]=(0,n.useState)(!1),[x,y]=(0,n.useState)(""),[p,b]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),[j,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)(null),[C,S]=(0,n.useState)(-1);(0,n.useEffect)(()=>{u(t)},[t]);let k=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(y(e),b("")):(b(e),y("")),setTimeout(()=>{y(""),b("")},3e3)},A=async e=>{var t;if(null==d||null==(t=d.user)?void 0:t.email){h(!0);try{let t=c.map((t,s)=>({...t,isDefault:s===e})),a=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.user.email,address:t})}),r=await a.json();r.success?(u(t),s(t),k("Default address updated successfully!")):k(r.error||"Failed to update default address",!0)}catch(e){k("Failed to update default address",!0)}h(!1)}},D=async e=>{var t;if(null==d||null==(t=d.user)?void 0:t.email){h(!0);try{let t={...e,isDefault:0===c.length||e.isDefault},a=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.user.email,addAddress:t})}),r=await a.json();r.success?(u(r.addresses),s(r.addresses),f(!1),k("Address added successfully!")):k(r.error||"Failed to add address",!0)}catch(e){k("Failed to add address",!0)}h(!1)}},E=async e=>{var t;if(null==d||null==(t=d.user)?void 0:t.email){h(!0);try{let t=[...c];t[C]=e;let a=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.user.email,address:t})}),r=await a.json();r.success?(u(t),s(t),v(!1),w(null),S(-1),k("Address updated successfully!")):k(r.error||"Failed to update address",!0)}catch(e){k("Failed to update address",!0)}h(!1)}},B=async e=>{var t;if((null==d||null==(t=d.user)?void 0:t.email)&&confirm("Are you sure you want to delete this address?")){h(!0);try{let t=await fetch("/api/user/delete-address",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.user.email,addressIndex:e})}),a=await t.json();a.success?(u(a.addresses),s(a.addresses),k("Address deleted successfully!")):k(a.error||"Failed to delete address",!0)}catch(e){k("Failed to delete address",!0)}h(!1)}},F=()=>{f(!1),v(!1),w(null),S(-1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Manage Addresses"}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-theme-color text-white rounded-md hover:bg-theme-color/90 transition-colors",children:"Add New Address"})]}),x&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:x}),p&&(0,a.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:p}),(0,a.jsx)("div",{className:"space-y-4",children:0===c.length?(0,a.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCCD"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No Addresses Found"}),(0,a.jsx)("p",{className:"text-gray-500 max-w-md mx-auto",children:"You haven't added any addresses yet. Add your first address to get started."}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"inline-block mt-4 px-6 py-2 bg-theme-color text-white rounded-md hover:bg-theme-color/90 transition-colors",children:"Add Your First Address"})]})}):c.map((e,t)=>{var s;return(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[e.isDefault&&(0,a.jsx)("span",{className:"inline-block bg-theme-color text-white px-2 py-1 rounded text-xs font-medium mb-3",children:"DEFAULT ADDRESS"}),(0,a.jsxs)("div",{className:"text-gray-900",children:[(0,a.jsx)("p",{className:"font-medium text-lg mb-1",children:e.street}),(0,a.jsxs)("p",{className:"text-gray-600",children:[e.city,", ",e.state," ",e.zipCode]}),(0,a.jsx)("p",{className:"text-gray-600",children:(null==(s=(0,i.jM)(e.country))?void 0:s.name)||e.country})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 ml-6",children:[(0,a.jsx)("button",{onClick:()=>{w(e),S(t),v(!0)},className:"px-4 py-2 text-sm bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors",children:"Edit"}),!e.isDefault&&(0,a.jsx)("button",{onClick:()=>A(t),disabled:m,className:"px-4 py-2 text-sm bg-green-50 text-green-600 rounded-md hover:bg-green-100 disabled:opacity-50 transition-colors",children:"Set Default"}),(0,a.jsx)("button",{onClick:()=>B(t),disabled:m,className:"px-4 py-2 text-sm bg-red-50 text-red-600 rounded-md hover:bg-red-100 disabled:opacity-50 transition-colors",children:"Delete"})]})]})},t)})})]}),(0,a.jsx)(o.A,{isOpen:g,onClose:F,title:"Add New Address",width:"w-96",children:(0,a.jsx)(l.A,{onSubmit:D,onCancel:F,loading:m,showSetDefault:c.length>0})}),(0,a.jsx)(o.A,{isOpen:j,onClose:F,title:"Edit Address",width:"w-96",children:N&&(0,a.jsx)(l.A,{address:N,onSubmit:E,onCancel:F,loading:m,isEdit:!0,showSetDefault:!1})})]})}function c(){var e;let{data:t}=(0,r.wV)(),[s,o]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{var e;(null==t||null==(e=t.user)?void 0:e.email)&&c()},[null==t||null==(e=t.user)?void 0:e.email]);let c=async()=>{try{var e,s;let a=await fetch("/api/user/profile?email=".concat(encodeURIComponent((null==t||null==(e=t.user)?void 0:e.email)||""))),r=await a.json();(null==(s=r.profile)?void 0:s.addresses)&&o(r.profile.addresses),i(!1)}catch(e){console.error("Error fetching addresses:",e),i(!1)}};return l?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Addresses"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Add, edit, or remove your saved addresses"})]}),(0,a.jsx)(d,{addresses:s,onAddressesChange:e=>{o(e)}})]})}}},e=>{e.O(0,[7128,6804,1495,4575,1261,7538,8681,4679,734,4610,8641,6546,4314,296,1436,2448,1294,4162,7358],()=>e(e.s=8468)),_N_E=e.O()}]);